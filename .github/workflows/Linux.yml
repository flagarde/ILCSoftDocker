name: Linux

on:
    push:
    pull_request:
    schedule:
    #Every Sunday at midnight
    - cron:  '0 0 * * 0'

jobs:

  build:
    name: "Build"
    runs-on: ubuntu-20.04
    strategy:
      fail-fast: false
    steps:
    - name: Checkout
      uses: actions/checkout@v2.3.4
    - name: Build docker image OS
      run: docker build --tag os --file Dockerfile.ubuntu18.04-gcc9.1 .
    - name: Build docker base
      run: docker build --file Dockerfile.base --tag ilcsoft/base-ubuntu18.04-gcc9.1 --build-arg image=os --build-arg compile_ncores=2 --build-arg ilcinstall_version=v02-01 --build-arg install_mode=LASTEST .
